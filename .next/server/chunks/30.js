exports.id=30,exports.ids=[30],exports.modules={750:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},4599:()=>{},5442:(e,t,r)=>{"use strict";var n=r(7577),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useState,u=n.useEffect,s=n.useLayoutEffect,l=n.useDebugValue;function a(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!o(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=i({inst:{value:r,getSnapshot:t}}),o=n[0].inst,c=n[1];return s(function(){o.value=r,o.getSnapshot=t,a(o)&&c({inst:o})},[e,r,t]),u(function(){return a(o)&&c({inst:o}),e(function(){a(o)&&c({inst:o})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},9251:(e,t,r)=>{"use strict";var n=r(7577),o=r(4095),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},u=o.useSyncExternalStore,s=n.useRef,l=n.useEffect,a=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var f=s(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;var m=u(e,(f=a(function(){function e(e){if(!l){if(l=!0,u=e,e=n(e),void 0!==o&&d.hasValue){var t=d.value;if(o(t,e))return s=t}return s=e}if(t=s,i(u,e))return t;var r=n(e);return void 0!==o&&o(t,r)?(u=e,t):(u=e,s=r)}var u,s,l=!1,a=void 0===r?null:r;return[function(){return e(t())},null===a?void 0:function(){return e(a())}]},[t,r,n,o]))[0],f[1]);return l(function(){d.hasValue=!0,d.value=m},[m]),c(m),m}},4095:(e,t,r)=>{"use strict";e.exports=r(5442)},1508:(e,t,r)=>{"use strict";e.exports=r(9251)},3904:(e,t,r)=>{"use strict";r.d(t,{z:()=>n});let n=[{id:1,name:"Level 1 — Comfort Zone",subtitle:"Market +10%",equityReturn:.1,bondReturn:.02,stress:.1,description:"Strong markets favor growth. Traditional allocations feel safe."},{id:2,name:"Level 2 — False Safety",subtitle:"Market –5%",equityReturn:-.05,bondReturn:.01,stress:.4,description:"Moderate drawdowns test diversification. Bonds partially compensate."},{id:3,name:"Level 3 — Market Stress",subtitle:"Market –30%",equityReturn:-.3,bondReturn:0,stress:.9,description:"Extreme stress breaks correlations. Only engineered outcomes survive."}]},9860:(e,t,r)=>{"use strict";function n(e,t,r){let n=e.equityReturn,o=e.bondReturn,i=function(e,t){if(e>=0){let r=e*t.participation;return null==t.cap?r:Math.min(r,t.cap)}return e>=-t.buffer?0:e+t.buffer}(n,r.equityNote),u=function(e,t,r){let n=t.stress<.7&&e>-.18?.25*r.coupon:0,o=-(1-r.barrier),i=0;if(e<o){let t=e-o;i="hard"===r.protection?.65*t:t}return e<o&&i>0&&(i=0),{total:n+i,income:n,principalHit:i}}(n,t,r.incomeNote),s=r.structSplitEquityNote*i+(1-r.structSplitEquityNote)*u.total-(.002+.004*t.stress),l=.15*t.stress*(r.eq*r.fi),a=r.fi*o+r.eq*n+r.struct*s-l,c=r.eq*n;return{totalR:a,maxDD:Math.max(0,-(c+r.struct*s+r.fi*o)),income:r.struct*(1-r.structSplitEquityNote)*u.income}}function o(e,t){return n({equityReturn:e.equityReturn,bondReturn:e.bondReturn},e,t)}r.d(t,{ZX:()=>n,oK:()=>o})},4191:(e,t,r)=>{"use strict";let n;r.d(t,{g:()=>S});let o=e=>{let t;let r=new Set,n=(e,n)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=n?n:"object"!=typeof o||null===o)?o:Object.assign({},t,o),r.forEach(r=>r(t,e))}},o=()=>t,i={setState:n,getState:o,getInitialState:()=>u,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,o,i);return i},i=e=>e?o(e):o;var u=r(7577),s=r(1508);let{useDebugValue:l}=u,{useSyncExternalStoreWithSelector:a}=s,c=!1,f=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?i(e):e,r=(e,r)=>(function(e,t=f,r){r&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let n=a(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return l(n),n})(t,e,r);return Object.assign(r,t),r};var m=r(3904),h=r(9860);class p{constructor(e){this.seed=e}next(){return this.seed=(1664525*this.seed+1013904223)%4294967296,this.seed/4294967296}normal(e,t){return e+Math.sqrt(-2*Math.log(this.next()))*Math.cos(2*Math.PI*this.next())*t}}function v(e,t=50){let r=new p(12345+1e3*e.id),n=[],o={1:.08,2:.1,3:.16}[e.id];for(let i=0;i<t;i++){let t=e.equityReturn+r.normal(0,o);t=Math.max(-.6,Math.min(.3,t));let i=e.bondReturn+r.normal(0,.01)+.25*e.stress*Math.min(0,t);i=Math.max(-.1,Math.min(.05,i)),n.push({equityReturn:t,bondReturn:i})}return n}function b(e,t){let r=e.map(e=>e.totalR),n=e.map(e=>e.maxDD),o=e.map(e=>e.income),i=r.reduce((e,t)=>e+t,0)/r.length,u=function(e){let t=[...e].sort((e,t)=>e-t),r=Math.max(1,Math.ceil(.1*t.length));return t.slice(0,r).reduce((e,t)=>e+t,0)/r}(r),s=n.reduce((e,t)=>e+t,0)/n.length,l=o.reduce((e,t)=>e+t,0)/o.length,a=150*(t.fi**2+t.eq**2+t.struct**2),c=0;t.fi>.7&&(c+=500*(t.fi-.7)**2),t.eq>.7&&(c+=800*(t.eq-.7)**2),t.eq>.85&&(c+=1500*(t.eq-.85)**2),t.struct>.6&&(c+=300*(t.struct-.6)**2),t.struct>.8&&(c+=500*(t.struct-.8)**2),(t.fi>.9||t.eq>.9||t.struct>.9)&&(c+=2e3*(Math.max(t.fi,t.eq,t.struct)-.9)**2);let f=400+100*i+15*l-60*s+120*u-a-c;return{meanR:i,cvar10:u,meanDD:s,meanIncome:l,penaltyDiv:a,penaltyConstraints:c,portfolioOutcomeScore:f}}let y={fi:.3,eq:.5,struct:.2,structSplitEquityNote:.6,equityNote:{buffer:.15,cap:.12,participation:1},incomeNote:{coupon:.1,barrier:.7,protection:"hard"}},S=(n=(e,t)=>({level:1,timeLeft:30,allocation:y,results:{},currentLevelId:null,startLevel:r=>{t().currentLevelId!==r&&e({level:r,timeLeft:30,currentLevelId:r})},tick:()=>{let r=t().timeLeft;r<=0||e({timeLeft:r-1})},setAllocation:r=>e({allocation:{...t().allocation,...r}}),finishLevel:()=>{let{level:r,allocation:n,results:o}=t();e({currentLevelId:null});let i=m.z.find(e=>e.id===r),u=b(v(i,50).map(e=>(0,h.ZX)(e,i,n)),n),s={totalR:u.meanR,maxDD:u.meanDD,income:u.meanIncome},l=u.portfolioOutcomeScore,a=function(e,t){let r=v(e,50),n=null;for(let o=0;o<=100;o+=5)for(let i=0;i<=100-o;i+=5){let u=100-o-i;if(u<0)continue;let s=u/100,l=o/100,a=i/100;if(!(Math.abs(l+a+s-1)>.001))for(let o of[0,.2,.4,.5,.6,.8,1])for(let i of[.1,.15,.2,.3])for(let u of[.08,.1,.12,.15,null])for(let c of[.06,.08,.1,.12])for(let f of[.6,.7,.8])for(let d of["hard","soft"]){let m={fi:l,eq:a,struct:s,structSplitEquityNote:o,equityNote:{...t.equityNote,buffer:i,cap:u},incomeNote:{coupon:c,barrier:f,protection:d}},p=b(r.map(t=>(0,h.ZX)(t,e,m)),m),v=p.portfolioOutcomeScore;(!n||v>n.portfolioOutcomeScore)&&(n={a:m,portfolioOutcomeScore:v,metrics:p})}}if(!n)throw Error(`No optimal allocation found for market environment ${e.id}`);let o={totalR:n.metrics.meanR,maxDD:n.metrics.meanDD,income:n.metrics.meanIncome};return{a:n.a,portfolioOutcomeScore:n.portfolioOutcomeScore,outcome:o,metrics:n.metrics}}(i,{equityNote:n.equityNote,incomeNote:n.incomeNote}),c=a.outcome,f=a.portfolioOutcomeScore,d=Math.max(f,l-1e-6);e({results:{...o,[r]:{regime:i,user:s,userAlloc:{...n},userPortfolioOutcomeScore:l,optimal:c,optimalAlloc:a.a,optimalPortfolioOutcomeScore:f,displayedOptimalPortfolioOutcomeScore:d}}})},reset:()=>e({level:1,timeLeft:30,allocation:y,results:{},currentLevelId:null})}))?d(n):d},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>o});var n=r(9510);r(5023);let o={title:"First Principle Asset Management",description:"Systematic portfolio enhancement through structured note strategies."};function i({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{className:"antialiased",children:e})})}},5023:()=>{}};