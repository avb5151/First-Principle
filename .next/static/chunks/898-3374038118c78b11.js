"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[898],{48729:function(t,e,r){r.d(e,{z:function(){return o}});let o=[{id:1,name:"Level 1 — Comfort Zone",subtitle:"Market +10%",equityReturn:.1,bondReturn:.02,stress:.1,description:"Strong markets favor growth. Traditional allocations feel safe."},{id:2,name:"Level 2 — False Safety",subtitle:"Market –5%",equityReturn:-.05,bondReturn:.01,stress:.4,description:"Moderate drawdowns test diversification. Bonds partially compensate."},{id:3,name:"Level 3 — Market Stress",subtitle:"Market –30%",equityReturn:-.3,bondReturn:0,stress:.9,description:"Extreme stress breaks correlations. Only engineered outcomes survive."}]},2971:function(t,e,r){function o(t,e,r){let o=t.equityReturn,n=t.bondReturn,i=function(t,e){if(t>=0){let r=t*e.participation;return null==e.cap?r:Math.min(r,e.cap)}return t>=-e.buffer?0:t+e.buffer}(o,r.equityNote),u=function(t,e,r){let o=e.stress<.7&&t>-.18?.25*r.coupon:0,n=-(1-r.barrier),i=0;if(t<n){let e=t-n;i="hard"===r.protection?.65*e:e}return t<n&&i>0&&(i=0),{total:o+i,income:o,principalHit:i}}(o,e,r.incomeNote),s=r.structSplitEquityNote*i+(1-r.structSplitEquityNote)*u.total-(.002+.004*e.stress),a=.15*e.stress*(r.eq*r.fi),l=r.fi*n+r.eq*o+r.struct*s-a,c=r.eq*o;return{totalR:l,maxDD:Math.max(0,-(c+r.struct*s+r.fi*n)),income:r.struct*(1-r.structSplitEquityNote)*u.income}}function n(t,e){return o({equityReturn:t.equityReturn,bondReturn:t.bondReturn},t,e)}r.d(e,{ZX:function(){return o},oK:function(){return n}})},7898:function(t,e,r){r.d(e,{g:function(){return c}});var o=r(59625),n=r(48729),i=r(2971);class u{next(){return this.seed=(1664525*this.seed+1013904223)%4294967296,this.seed/4294967296}normal(t,e){return t+Math.sqrt(-2*Math.log(this.next()))*Math.cos(2*Math.PI*this.next())*e}constructor(t){this.seed=t}}function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=new u(12345+1e3*t.id),o=[],n={1:.08,2:.1,3:.16}[t.id];for(let i=0;i<e;i++){let e=t.equityReturn+r.normal(0,n);e=Math.max(-.6,Math.min(.3,e));let i=t.bondReturn+r.normal(0,.01)+.25*t.stress*Math.min(0,e);i=Math.max(-.1,Math.min(.05,i)),o.push({equityReturn:e,bondReturn:i})}return o}function a(t,e){let r=t.map(t=>t.totalR),o=t.map(t=>t.maxDD),n=t.map(t=>t.income),i=r.reduce((t,e)=>t+e,0)/r.length,u=function(t){let e=[...t].sort((t,e)=>t-e),r=Math.max(1,Math.ceil(.1*e.length));return e.slice(0,r).reduce((t,e)=>t+e,0)/r}(r),s=o.reduce((t,e)=>t+e,0)/o.length,a=n.reduce((t,e)=>t+e,0)/n.length,l=150*(e.fi**2+e.eq**2+e.struct**2),c=0;e.fi>.7&&(c+=500*(e.fi-.7)**2),e.eq>.7&&(c+=800*(e.eq-.7)**2),e.eq>.85&&(c+=1500*(e.eq-.85)**2),e.struct>.6&&(c+=300*(e.struct-.6)**2),e.struct>.8&&(c+=500*(e.struct-.8)**2),(e.fi>.9||e.eq>.9||e.struct>.9)&&(c+=2e3*(Math.max(e.fi,e.eq,e.struct)-.9)**2);let f=100*i+15*a-60*s+120*u-l-c;return{meanR:i,cvar10:u,meanDD:s,meanIncome:a,penaltyDiv:l,penaltyConstraints:c,score:f}}let l={fi:.3,eq:.5,struct:.2,structSplitEquityNote:.6,equityNote:{buffer:.15,cap:.12,participation:1},incomeNote:{coupon:.1,barrier:.7,protection:"hard"}},c=(0,o.Ue)((t,e)=>({level:1,timeLeft:30,allocation:l,results:{},startLevel:e=>t({level:e,timeLeft:30}),tick:()=>{let r=e().timeLeft;r<=0||t({timeLeft:r-1})},setAllocation:r=>t({allocation:{...e().allocation,...r}}),finishLevel:()=>{let{level:r,allocation:o,results:u}=e(),l=n.z.find(t=>t.id===r),c=a(s(l,50).map(t=>(0,i.ZX)(t,l,o)),o),f={totalR:c.meanR,maxDD:c.meanDD,income:c.meanIncome},m=c.score,d=function(t,e){let r=s(t,50),o=null;for(let n=0;n<=100;n+=5)for(let u=0;u<=100-n;u+=5){let s=100-n-u;if(s<0)continue;let l=s/100,c=n/100,f=u/100;if(!(Math.abs(c+f+l-1)>.001))for(let n of[0,.2,.4,.5,.6,.8,1])for(let u of[.1,.15,.2,.3])for(let s of[.08,.1,.12,.15,null])for(let m of[.06,.08,.1,.12])for(let d of[.6,.7,.8])for(let h of["hard","soft"]){let p={fi:c,eq:f,struct:l,structSplitEquityNote:n,equityNote:{...e.equityNote,buffer:u,cap:s},incomeNote:{coupon:m,barrier:d,protection:h}},q=a(r.map(e=>(0,i.ZX)(e,t,p)),p),y=q.score;(!o||y>o.score)&&(o={a:p,score:y,metrics:q})}}if(!o)throw Error("No optimal allocation found for market environment ".concat(t.id));let n={totalR:o.metrics.meanR,maxDD:o.metrics.meanDD,income:o.metrics.meanIncome};return{a:o.a,score:o.score,outcome:n,metrics:o.metrics}}(l,{equityNote:o.equityNote,incomeNote:o.incomeNote}),h=d.outcome,p=d.score,q=Math.max(p,m-1e-6);t({results:{...u,[r]:{regime:l,user:f,userAlloc:{...o},userScore:m,optimal:h,optimalAlloc:d.a,optimalScore:p,displayedOptimalScore:q}}})},reset:()=>t({level:1,timeLeft:30,allocation:l,results:{}})}))}}]);