(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{34723:function(e,t,i){Promise.resolve().then(i.bind(i,16641))},16641:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return C}});var a=i(57437),r=i(2265),s=i(99376),n=i(48729),o=i(7898),l=i(29),c=i.n(l),d=i(40521);function x(e){let{allocation:t,onChange:i}=e,{fi:r,eq:s,struct:n}=t,o=r+s+n,l=o>0?{fi:r/o,eq:s/o,struct:n/o}:{fi:0,eq:0,struct:0},x=(e,a)=>{let r={...t},s=Math.max(0,Math.min(1,a)),n=s-t[e],o="fi"===e?["eq","struct"]:"eq"===e?["fi","struct"]:["fi","eq"],l=o.reduce((e,i)=>e+t[i],0);if(r[e]=s,0===l&&n<0)return;if(l>0){let e=(1-s)/l;o.forEach(i=>{r[i]=t[i]*e})}else o.forEach(e=>{r[e]=0});let c=r.fi+r.eq+r.struct;Math.abs(c-1)>1e-4&&c>0&&(r.fi/=c,r.eq/=c,r.struct/=c),i(r)},h=e=>{let{label:t,value:i,onChange:r,color:s}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-white/80",children:t}),(0,a.jsxs)("span",{className:"text-sm tabular-nums text-white/60",children:[(100*i).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{className:"jsx-b49f1b9f64e6b92 relative",children:[(0,a.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:i,onChange:e=>r(parseFloat(e.target.value)),style:{background:"linear-gradient(to right, ".concat(s," 0%, ").concat(s," ").concat(100*i,"%, rgba(255,255,255,0.1) ").concat(100*i,"%, rgba(255,255,255,0.1) 100%)")},className:"jsx-b49f1b9f64e6b92 w-full h-2 bg-white/10 rounded-lg appearance-none cursor-pointer slider"}),(0,a.jsx)(c(),{id:"b49f1b9f64e6b92",children:".slider.jsx-b49f1b9f64e6b92::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;width:18px;height:18px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:white;cursor:pointer;border:2px solid#000}.slider.jsx-b49f1b9f64e6b92::-moz-range-thumb{width:18px;height:18px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:white;cursor:pointer;border:2px solid#000}"})]})]})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Asset Allocation"}),(0,a.jsxs)("div",{className:"text-sm tabular-nums ".concat(.01>Math.abs(o-1)?"text-white/60":"text-red-400"),children:["Total: ",(100*o).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsx)(h,{label:"Fixed Income",value:r,onChange:e=>x("fi",e),color:"#3b82f6"}),(0,a.jsx)(h,{label:"Equities (EQUI Index)",value:s,onChange:e=>x("eq",e),color:"#10b981"}),(0,a.jsx)(h,{label:"Structured Strategies",value:n,onChange:e=>x("struct",e),color:"#f59e0b"})]})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-white/10",children:(0,a.jsxs)("div",{className:"flex h-8 rounded-lg overflow-hidden",children:[r>0&&(0,a.jsx)(d.E.div,{initial:!1,animate:{width:"".concat(100*l.fi,"%")},className:"bg-blue-500",transition:{duration:.2}}),s>0&&(0,a.jsx)(d.E.div,{initial:!1,animate:{width:"".concat(100*l.eq,"%")},className:"bg-green-500",transition:{duration:.2}}),n>0&&(0,a.jsx)(d.E.div,{initial:!1,animate:{width:"".concat(100*l.struct,"%")},className:"bg-amber-500",transition:{duration:.2}})]})})]})}function h(e,t){let{profile:i,controls:a}=e;if("income"===i){let{incomeTarget:e,protection:t}=a;return{structSplitEquityNote:.1,incomeNote:{coupon:"high"===e?.12:"med"===e?.1:.08,barrier:"conservative"===t?.8:.7,protection:"hard"},equityNote:{buffer:.2,cap:.1,participation:1}}}if("balanced"===i){let{tilt:e,protectionLevel:t}=a,i=.5;return"income"===e&&(i=.4),"growth"===e&&(i=.6),{structSplitEquityNote:i,incomeNote:{coupon:.1,barrier:20===t?.8:15===t?.75:.7,protection:"hard"},equityNote:{buffer:t/100,cap:"growth"===e?null:.12,participation:1}}}if("equity"===i){let{upside:e,buffer:t}=a;return{structSplitEquityNote:.85,incomeNote:{coupon:.08,barrier:.75,protection:"hard"},equityNote:{buffer:t/100,cap:"conservative"===e?.12:"standard"===e?.15:null,participation:"high"===e?1:"standard"===e?1:.9}}}return{}}function m(e){let{allocation:t,onChange:i}=e,[s,n]=(0,r.useState)((()=>{let e=t.structSplitEquityNote;return e<=.2?"income":e>=.7?"equity":"balanced"})()),[o,l]=(0,r.useState)((()=>{if("income"===s){let e=t.incomeNote.coupon;return{incomeTarget:e>=.11?"high":e>=.09?"med":"low",protection:t.incomeNote.barrier>=.75?"conservative":"standard"}}if("balanced"===s){let e=t.structSplitEquityNote,i=t.equityNote.buffer;return{tilt:e<=.45?"income":e>=.55?"growth":"neutral",protectionLevel:i>=.175?20:i>=.125?15:10}}let e=t.equityNote.buffer,i=t.equityNote.cap;return{upside:null===i?"high":i>=.14?"standard":"conservative",buffer:e>=.175?20:e>=.125?15:10}})()),c=e=>{let a;n(e),l(a="income"===e?{incomeTarget:"med",protection:"standard"}:"balanced"===e?{tilt:"neutral",protectionLevel:15}:{upside:"standard",buffer:15}),i(h({profile:e,controls:a},t))},x=e=>{let a={...o,...e};l(a),i(h({profile:s,controls:a},t))},m=function(e){let{profile:t,controls:i}=e;if("income"===t){let{incomeTarget:e,protection:t}=i;return"Targets ".concat("high"===e?"high income":"med"===e?"moderate income":"stable income"," ").concat("conservative"===t?"with conservative principal protection":"with standard protection"," through barrier-protected income structures.")}if("balanced"===t){let{tilt:e,protectionLevel:t}=i,a="income"===e?"income-oriented":"growth"===e?"growth-oriented":"balanced";return"".concat(a.charAt(0).toUpperCase()+a.slice(1)," allocation with ").concat(t,"% downside buffer protection.")}if("equity"===t){let{upside:e,buffer:t}=i;return"Focuses on ".concat("high"===e?"uncapped upside participation":"standard"===e?"standard upside":"conservative upside"," with ").concat(t,"% downside buffer protection.")}return""}({profile:s,controls:o});return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-1",children:"Structured Strategy"}),(0,a.jsx)("p",{className:"text-sm text-white/60 mb-6",children:"Select a profile to engineer outcomes aligned with your objectives."}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6",children:[{id:"income",title:"Income-Focused",description:"Maximize cash yield with principal protection"},{id:"balanced",title:"Balanced",description:"Blend of income and growth with downside buffers"},{id:"equity",title:"Equity-Linked",description:"Upside participation with defined downside protection"}].map(e=>(0,a.jsxs)(d.E.button,{onClick:()=>c(e.id),className:"rounded-xl border p-4 text-left transition-all ".concat(s===e.id?"border-white/40 bg-white/5 shadow-lg shadow-white/5":"border-white/10 bg-white/[0.02] hover:border-white/20 hover:bg-white/[0.03]"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1 ".concat(s===e.id?"text-white":"text-white/70"),children:e.title}),(0,a.jsx)("div",{className:"text-xs text-white/50 leading-relaxed",children:e.description})]},e.id))}),(0,a.jsxs)("div",{className:"space-y-5 pt-4 border-t border-white/10",children:["income"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-white/70 mb-3",children:"Income Target"}),(0,a.jsx)("div",{className:"flex gap-2",children:["low","med","high"].map(e=>(0,a.jsx)("button",{onClick:()=>x({incomeTarget:e}),className:"flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ".concat(o.incomeTarget===e?"bg-white text-black":"bg-white/10 text-white/70 hover:bg-white/15"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-white/70 mb-3",children:"Protection Level"}),(0,a.jsx)("div",{className:"flex gap-2",children:["conservative","standard"].map(e=>(0,a.jsx)("button",{onClick:()=>x({protection:e}),className:"flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ".concat(o.protection===e?"bg-white text-black":"bg-white/10 text-white/70 hover:bg-white/15"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),"balanced"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-white/70 mb-3",children:"Allocation Tilt"}),(0,a.jsx)("div",{className:"flex gap-2",children:["income","neutral","growth"].map(e=>(0,a.jsx)("button",{onClick:()=>x({tilt:e}),className:"flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ".concat(o.tilt===e?"bg-white text-black":"bg-white/10 text-white/70 hover:bg-white/15"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-white/70 mb-3",children:"Downside Protection"}),(0,a.jsx)("div",{className:"flex gap-2",children:[10,15,20].map(e=>(0,a.jsxs)("button",{onClick:()=>x({protectionLevel:e}),className:"flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ".concat(o.protectionLevel===e?"bg-white text-black":"bg-white/10 text-white/70 hover:bg-white/15"),children:[e,"%"]},e))})]})]}),"equity"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-white/70 mb-3",children:"Upside Participation"}),(0,a.jsx)("div",{className:"flex gap-2",children:["conservative","standard","high"].map(e=>(0,a.jsx)("button",{onClick:()=>x({upside:e}),className:"flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ".concat(o.upside===e?"bg-white text-black":"bg-white/10 text-white/70 hover:bg-white/15"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-white/70 mb-3",children:"Downside Buffer"}),(0,a.jsx)("div",{className:"flex gap-2",children:[10,15,20].map(e=>(0,a.jsxs)("button",{onClick:()=>x({buffer:e}),className:"flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors ".concat(o.buffer===e?"bg-white text-black":"bg-white/10 text-white/70 hover:bg-white/15"),children:[e,"%"]},e))})]})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-white/10",children:[(0,a.jsx)("div",{className:"text-xs text-white/50 uppercase tracking-wider mb-2",children:"Outcome Summary"}),(0,a.jsx)("p",{className:"text-sm text-white/80 leading-relaxed",children:m})]})]})})}var u=i(47625),b=i(87549),p=i(56940),f=i(97059),g=i(62994),w=i(8147),v=i(84962),j=i(54061),N=i(2971);function y(e){var t;let{x:i=0,y:r=0,payload:s}=e,n=null!==(t=null==s?void 0:s.value)&&void 0!==t?t:0;return(0,a.jsx)("g",{transform:"translate(".concat(i,",").concat(r,")"),children:(0,a.jsxs)("text",{x:0,y:12,textAnchor:"middle",fill:"rgba(255,255,255,0.45)",fontSize:10,children:[n,"%"]})})}function k(e){let{allocation:t,currentEnvironment:i,compact:s=!1}=e,{data:n,yDomain:o}=(0,r.useMemo)(()=>{let e=[],i=[];for(let a=-.4;a<=.2;a+=.02){let r={id:1,name:"Synthetic",subtitle:"",equityReturn:a,bondReturn:.02,stress:a<-.2?.9:a<-.05?.4:.1,description:""},s=(0,N.oK)(r,t),n=100*s.totalR;i.push(n),e.push({equityReturn:100*a,portfolioReturn:n,maxDrawdown:100*s.maxDD})}let a=Math.min(...i),r=Math.max(...i),n=s?Math.max(2,(r-a)*.06):Math.max(5,(r-a)*.1);return{data:e,yDomain:[Math.floor(a-n),Math.ceil(r+n)]}},[t,s]),l=i?(0,N.oK)(i,t):null;return(0,a.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2 flex-shrink-0",children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-white",children:"Payoff Profile"}),l&&(0,a.jsxs)("div",{className:"text-xs tabular-nums text-white/60",children:["Current: ",(0,a.jsxs)("span",{className:"text-white font-medium",children:[(100*l.totalR).toFixed(1),"%"]})]})]}),(0,a.jsx)("div",{className:s?"flex-1 w-full h-full bg-black/30 rounded-lg":"flex-1 min-h-0 bg-black/40 rounded-xl border border-white/5 p-4",children:(0,a.jsx)(u.h,{width:"100%",height:"100%",children:(0,a.jsxs)(b.w,{data:n,margin:s?{top:6,right:6,bottom:0,left:0}:{top:12,right:18,bottom:16,left:18},children:[!s&&(0,a.jsx)(p.q,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.08)"}),(0,a.jsx)(f.K,{dataKey:"equityReturn",type:"number",domain:[-40,20],ticks:s?[-40,-20,0,20]:[-40,-30,-20,-10,0,10,20],stroke:"rgba(255,255,255,0.3)",height:s?18:void 0,tick:s?y:{fill:"rgba(255,255,255,0.5)",fontSize:11},tickMargin:s?-6:8,tickSize:0,tickLine:!s,axisLine:!s,tickFormatter:s?void 0:e=>"".concat(e,"%"),label:s?void 0:{value:"Equity Return (%)",position:"insideBottom",offset:-8,fill:"rgba(255,255,255,0.5)",style:{fontSize:"12px"}}}),!s&&(0,a.jsx)(g.B,{type:"number",domain:o,stroke:"rgba(255,255,255,0.3)",tick:{fill:"rgba(255,255,255,0.5)",fontSize:11},tickMargin:8,tickSize:0,tickLine:!0,axisLine:!0,tickFormatter:e=>e%1==0?"".concat(e,"%"):"".concat(e.toFixed(1),"%"),label:{value:"Portfolio Outcome (%)",angle:-90,position:"insideLeft",fill:"rgba(255,255,255,0.5)",style:{fontSize:"12px"}}}),(0,a.jsx)(w.u,{contentStyle:{backgroundColor:"rgba(0,0,0,0.95)",border:"1px solid rgba(255,255,255,0.15)",borderRadius:"8px",color:"#fff",padding:"8px 12px"},formatter:e=>{let t=e%1==0?e.toFixed(0):e.toFixed(1);return["".concat(t,"%"),"Portfolio Outcome"]},labelFormatter:e=>{let t=parseFloat(e),i=t%1==0?t.toFixed(0):t.toFixed(1);return"Equity: ".concat(i,"%")}}),(0,a.jsx)(v.d,{y:0,stroke:s?"rgba(255,255,255,0.25)":"rgba(255,255,255,0.2)",strokeDasharray:"2 2",strokeWidth:s?1.5:1}),(0,a.jsx)(v.d,{x:0,stroke:s?"rgba(255,255,255,0.25)":"rgba(255,255,255,0.2)",strokeDasharray:"2 2",strokeWidth:s?1.5:1}),i&&(0,a.jsx)(v.d,{x:100*i.equityReturn,stroke:"rgba(255,255,255,0.4)",strokeWidth:1.5,strokeDasharray:"3 3",label:s?void 0:{value:"Current Environment",position:"top",fill:"rgba(255,255,255,0.7)",style:{fontSize:"11px"}}}),(0,a.jsx)(j.x,{type:"monotone",dataKey:"portfolioReturn",stroke:"#ffffff",strokeWidth:2.5,dot:!1,activeDot:{r:5,fill:"#ffffff",strokeWidth:2,stroke:"#000"}})]})})})]})}function q(e){let{allocation:t,currentEnvironment:i}=e,r=i?(0,N.oK)(i,t):null;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-white mb-4",children:"Current Outcome"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"bg-white/5 rounded-lg border border-white/5 p-4",children:[(0,a.jsx)("div",{className:"text-white/50 text-xs uppercase tracking-wider mb-2",children:"Portfolio Outcome"}),(0,a.jsx)("div",{className:"text-2xl font-semibold tabular-nums ".concat(r&&r.totalR>=0?"text-white":"text-red-400"),children:r?"".concat((100*r.totalR).toFixed(2),"%"):"—"})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-lg border border-white/5 p-4",children:[(0,a.jsx)("div",{className:"text-white/50 text-xs uppercase tracking-wider mb-2",children:"Max Drawdown"}),(0,a.jsx)("div",{className:"text-2xl font-semibold tabular-nums text-white",children:r?"".concat((100*r.maxDD).toFixed(2),"%"):"—"})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-lg border border-white/5 p-4",children:[(0,a.jsx)("div",{className:"text-white/50 text-xs uppercase tracking-wider mb-2",children:"Income Generated"}),(0,a.jsx)("div",{className:"text-2xl font-semibold tabular-nums text-white",children:r?"".concat((100*r.income).toFixed(2),"%"):"—"})]})]})]})}function E(e){let{timeLeft:t,totalTime:i}=e,r=t/i,s=t<=10;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-white/60",children:"Time Remaining"}),(0,a.jsxs)("span",{className:"text-2xl font-semibold tabular-nums ".concat(s?"text-red-400":"text-white"),children:[t,"s"]})]}),(0,a.jsx)("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:(0,a.jsx)(d.E.div,{initial:!1,animate:{width:"".concat(100*r,"%")},transition:{duration:1,ease:"linear"},className:"h-full ".concat(s?"bg-red-400":"bg-white")})})]})}function C(){let e=(0,s.useRouter)(),{level:t,timeLeft:i,allocation:l,tick:c,finishLevel:h,startLevel:u,setAllocation:b}=(0,o.g)(),p=n.z.find(e=>e.id===t);return(0,r.useEffect)(()=>{u(t)},[]),(0,r.useEffect)(()=>{if(i<=0){h(),e.push("/portfolio-challenge/results?level=".concat(t));return}let a=setInterval(()=>c(),1e3);return()=>clearInterval(a)},[i,c,h,e,t]),(0,a.jsx)("main",{className:"min-h-screen bg-black text-white px-6 py-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)(d.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-start justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-white/50 text-xs uppercase tracking-widest mb-1",children:["Level ",t," of 3"]}),(0,a.jsx)("h1",{className:"text-3xl font-semibold mb-1",children:p.name}),(0,a.jsx)("div",{className:"text-lg text-white/70",children:p.subtitle}),(0,a.jsx)("p",{className:"text-white/50 mt-1 text-sm max-w-2xl",children:p.description})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)(E,{timeLeft:i,totalTime:30})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(0,a.jsx)(d.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"lg:col-span-7 rounded-2xl border border-white/10 bg-white/[0.02] backdrop-blur-sm p-6",children:(0,a.jsx)(x,{allocation:l,onChange:b})}),(0,a.jsx)(d.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"lg:col-span-5 rounded-2xl border border-white/10 bg-white/[0.02] backdrop-blur-sm p-6",children:(0,a.jsx)(m,{allocation:l,onChange:b})}),(0,a.jsx)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"lg:col-span-8 rounded-2xl border border-white/10 bg-white/[0.02] backdrop-blur-sm p-4 flex flex-col",style:{minHeight:"500px"},children:(0,a.jsx)(k,{allocation:l,currentEnvironment:p,compact:!0})}),(0,a.jsx)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"lg:col-span-4 rounded-2xl border border-white/10 bg-white/[0.02] backdrop-blur-sm p-6 flex flex-col justify-center",children:(0,a.jsx)(q,{allocation:l,currentEnvironment:p})})]}),(0,a.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mt-4 text-center text-xs text-white/40",children:"Adjust your allocation and structured note terms. The payoff curve updates in real time."})]})})}}},function(e){e.O(0,[521,861,898,971,117,744],function(){return e(e.s=34723)}),_N_E=e.O()}]);