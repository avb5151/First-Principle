(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[288],{51719:function(e,t,i){Promise.resolve().then(i.bind(i,55504))},99376:function(e,t,i){"use strict";var r=i(35475);i.o(r,"useRouter")&&i.d(t,{useRouter:function(){return r.useRouter}}),i.o(r,"useSearchParams")&&i.d(t,{useSearchParams:function(){return r.useSearchParams}})},24369:function(e,t,i){"use strict";var r=i(2265),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=r.useState,a=r.useEffect,o=r.useLayoutEffect,c=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!s(e,i)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var i=t(),r=n({inst:{value:i,getSnapshot:t}}),s=r[0].inst,u=r[1];return o(function(){s.value=i,s.getSnapshot=t,l(s)&&u({inst:s})},[e,i,t]),a(function(){return l(s)&&u({inst:s}),e(function(){l(s)&&u({inst:s})})},[e]),c(i),i};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},92860:function(e,t,i){"use strict";var r=i(2265),s=i(82558),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=s.useSyncExternalStore,o=r.useRef,c=r.useEffect,l=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,i,r,s){var d=o(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;var m=a(e,(d=l(function(){function e(e){if(!c){if(c=!0,a=e,e=r(e),void 0!==s&&p.hasValue){var t=p.value;if(s(t,e))return o=t}return o=e}if(t=o,n(a,e))return t;var i=r(e);return void 0!==s&&s(t,i)?(a=e,t):(a=e,o=i)}var a,o,c=!1,l=void 0===i?null:i;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,i,r,s]))[0],d[1]);return c(function(){p.hasValue=!0,p.value=m},[m]),u(m),m}},82558:function(e,t,i){"use strict";e.exports=i(24369)},35195:function(e,t,i){"use strict";e.exports=i(92860)},55504:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return m}});var r=i(57437),s=i(2265),n=i(27648),a=i(99376),o=i(7898),c=i(40521);function l(){let e=(0,a.useSearchParams)(),t=(0,a.useRouter)(),i=e.get("level"),l=i?parseInt(i):null,{results:m,startLevel:h}=(0,o.g)(),x=l&&m[l];(0,s.useEffect)(()=>{l&&!x&&t.push("/portfolio-challenge/game")},[l,x,t]);let f=(0,s.useMemo)(()=>l&&x?function(e){let{regime:t,user:i,userAlloc:r,optimal:s,optimalAlloc:n}=e,a=s.totalR-i.totalR,o=n.eq-r.eq,c=n.fi-r.fi,l=n.struct-r.struct,u=s.maxDD-i.maxDD;switch(t.id){case 1:return function(e,t){let{userAlloc:i,optimalAlloc:r,user:s,optimal:n}=e,a=[],o="";if(i.fi>r.fi+.1||i.struct>r.struct+.15){let e=i.fi>r.fi+.1?"fixed income":"structured protection";a.push("You overpaid for protection (excess ".concat(e,") and gave up upside participation in a strong market."))}return null!==i.equityNote.cap&&null===r.equityNote.cap?a.push("Your structured equity leg was capped at ".concat((100*i.equityNote.cap).toFixed(0),"%, truncating right-tail participation when uncapped exposure would have captured more upside.")):null!==i.equityNote.cap&&null!==r.equityNote.cap&&i.equityNote.cap<r.equityNote.cap&&a.push("Your structured equity cap (".concat((100*i.equityNote.cap).toFixed(0),"%) was too tight relative to optimal (").concat((100*r.equityNote.cap).toFixed(0),"%), limiting upside capture.")),i.eq<r.eq-.15&&a.push("You ran ".concat((100*i.eq).toFixed(0),"% equity exposure versus ").concat((100*r.eq).toFixed(0),"% optimal; in a strong market, optimal maintained higher delta exposure while keeping drawdown budget controlled.")),i.struct>.2&&r.struct>.2&&i.equityNote.participation<r.equityNote.participation-.1&&a.push("Optimal used higher participation (".concat((100*r.equityNote.participation).toFixed(0),"% vs ").concat((100*i.equityNote.participation).toFixed(0),"%) to capture more of the equity upside.")),o=r.eq>i.eq+.1?"Optimal maintained higher equity delta (".concat((100*r.eq).toFixed(0),"% vs ").concat((100*i.eq).toFixed(0),"%) to capture upside while using structured buffers to control tail risk."):r.struct>i.struct+.1&&null===r.equityNote.cap?"Optimal used uncapped structured equity exposure with higher participation to capture upside convexity while limiting downside.":"Optimal balanced equity exposure with defined-outcome structures, capturing upside while maintaining risk control.",0===a.length&&a.push("Optimal allocation captured ".concat((100*t.gap).toFixed(1)," percentage points more return through better balance of upside participation and risk control.")),{headline:"Opportunity Missed: Upside Capture",bullets:a,optimalMechanism:o}}(e,{eqDiff:o,fiDiff:c,structDiff:l,ddDiff:u,gap:a});case 2:return function(e,t){let{userAlloc:i,optimalAlloc:r,user:s,optimal:n}=e,a=[];if(i.eq>r.eq+.2&&i.struct<r.struct-.15&&a.push("You held ".concat((100*i.eq).toFixed(0),"% unhedged equity exposure into a mild drawdown; optimal used ").concat((100*r.struct).toFixed(0),"% structured buffer exposure, converting small losses into flat outcomes.")),i.struct>.2&&r.struct>i.struct+.1){let t=i.equityNote.buffer;r.equityNote.buffer,e.regime.equityReturn>=-t&&e.regime.equityReturn<-.02&&a.push("In a -".concat((100*Math.abs(e.regime.equityReturn)).toFixed(0),"% drawdown, optimal increased buffer exposure (").concat((100*r.struct).toFixed(0),"% vs ").concat((100*i.struct).toFixed(0),"%) to convert losses into flat outcomes."))}if(i.struct>.1&&r.struct>i.struct&&r.structSplitEquityNote<i.structSplitEquityNote-.2){let e=i.struct*(1-i.structSplitEquityNote);r.struct,r.structSplitEquityNote,a.push("You underutilized carry (".concat((100*e).toFixed(0),"% income note exposure); optimal harvested ").concat((100*n.income).toFixed(2),"% income via structured notes when drawdown remained above barrier, capturing yield without taking barrier risk."))}if(i.struct>.2&&i.structSplitEquityNote<.5){let t=i.incomeNote.barrier,s=r.incomeNote.barrier;-e.regime.equityReturn<1-t&&s>t+.05&&a.push("Optimal increased defined-outcome exposure with higher barrier protection (".concat((100*s).toFixed(0),"% vs ").concat((100*t).toFixed(0),"%), reducing loss while preserving reinvestment flexibility."))}return 0===a.length&&a.push("Optimal allocation reduced loss by ".concat((100*Math.abs(t.ddDiff)).toFixed(1)," percentage points through better use of buffer structures and defined-outcome exposure in a mild drawdown environment.")),{headline:"Opportunity Missed: Mild Drawdown Management",bullets:a,optimalMechanism:r.struct>i.struct+.15?"Optimal increased defined-outcome exposure (".concat((100*r.struct).toFixed(0),"% vs ").concat((100*i.struct).toFixed(0),"%), using buffers to convert small losses into flat outcomes while harvesting carry."):"Optimal balanced buffer protection with carry generation, reducing drawdown while maintaining income."}}(e,{eqDiff:o,fiDiff:c,structDiff:l,ddDiff:u,gap:a});case 3:return function(e,t){let{userAlloc:i,optimalAlloc:r,user:s,optimal:n}=e,a=[];if(i.eq>.3&&i.fi>.3&&i.struct<.2&&a.push("Diversification failed: your ".concat((100*i.eq).toFixed(0),"% equity + ").concat((100*i.fi).toFixed(0),"% fixed income mix suffered correlation convergence (both declined); naive EQ+FI diversification didn't control tail loss in extreme stress.")),i.struct>.2&&i.structSplitEquityNote<.6){let t=i.incomeNote.barrier,s=-e.regime.equityReturn;s>=1-t&&(r.incomeNote.barrier>t+.05||r.structSplitEquityNote>i.structSplitEquityNote+.2?a.push("Your income note exposure (".concat((100*t).toFixed(0),"% barrier) was breached in a -").concat((100*s).toFixed(0),"% drawdown; once breached, principal participates in the drawdown. Optimal reduced barrier risk or shifted to equity-linked structures.")):a.push("Your income note barrier (".concat((100*t).toFixed(0),"%) was breached; optimal reduced structured concentration or used higher barriers to limit principal exposure.")))}if(i.struct>r.struct+.15&&i.structSplitEquityNote<.5&&a.push("You over-concentrated in structured notes (".concat((100*i.struct).toFixed(0),"% vs ").concat((100*r.struct).toFixed(0),"% optimal), with too much exposure to coupon-paying structures that took principal hits when barriers breached.")),i.struct>.2&&i.structSplitEquityNote<r.structSplitEquityNote-.2&&a.push("Optimal shifted from 'coupon-first' to 'principal-first': used higher buffer equity-linked exposure (".concat((r.struct*r.structSplitEquityNote*100).toFixed(0),"% vs ").concat((i.struct*i.structSplitEquityNote*100).toFixed(0),"%) with lower barrier risk, preserving capital more effectively.")),i.struct>.2&&r.struct>.2){let e=i.equityNote.buffer,t=r.equityNote.buffer;t>e+.05&&a.push("Optimal used larger buffers (".concat((100*t).toFixed(0),"% vs ").concat((100*e).toFixed(0),"%) to better protect principal in extreme stress."))}return 0===a.length&&a.push("Optimal allocation preserved ".concat((100*Math.abs(t.ddDiff)).toFixed(1)," percentage points more capital through better structured outcome design and reduced barrier breach risk.")),{headline:"Opportunity Missed: Tail Risk Control",bullets:a,optimalMechanism:r.struct>i.struct+.1?"Optimal increased buffer-protected exposure (".concat((100*r.struct).toFixed(0),"% vs ").concat((100*i.struct).toFixed(0),"%) with higher barriers and lower concentration, preserving capital when correlations break."):r.structSplitEquityNote>i.structSplitEquityNote+.2?"Optimal shifted to principal-first structures (higher buffer equity-linked exposure) rather than coupon-first (income notes), better protecting capital in tail scenarios.":"Optimal used disciplined structured exposure with appropriate barriers and buffers to control tail risk when diversification fails."}}(e,{eqDiff:o,fiDiff:c,structDiff:l,ddDiff:u,gap:a});default:return{headline:"Opportunity Missed",bullets:["The optimal portfolio found a more efficient allocation."]}}}(x):{headline:"Opportunity Missed",bullets:[],optimalMechanism:void 0},[l,x]);if(!l||!x)return(0,r.jsx)("main",{className:"min-h-screen bg-black text-white grid place-items-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-white/60 mb-4",children:"No results found"}),(0,r.jsx)(n.default,{href:"/portfolio-challenge/game",className:"text-white underline hover:text-white/80",children:"Return to game"})]})});let{regime:b,user:y,userAlloc:g,optimal:w,optimalAlloc:v,userScore:N,optimalScore:j,displayedOptimalScore:q}=x,E=q-N,F=E<=.5,S=l<3?l+1:null;return(0,r.jsx)("main",{className:"min-h-screen bg-black text-white px-6 py-10",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,r.jsxs)(c.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8",children:[(0,r.jsxs)("div",{className:"text-white/50 text-sm uppercase tracking-widest mb-1",children:["Level ",l," Results"]}),(0,r.jsx)("h1",{className:"text-4xl font-semibold mb-2",children:b.name}),(0,r.jsx)("div",{className:"text-xl text-white/70",children:b.subtitle})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"rounded-2xl border border-white/10 bg-white/[0.02] backdrop-blur-sm p-6 flex flex-col items-center text-center",children:[(0,r.jsx)("div",{className:"text-white/70 text-lg font-medium mb-4",children:"Your Portfolio Outcome"}),(0,r.jsx)("div",{className:"text-5xl md:text-6xl font-semibold tabular-nums mb-8 flex-grow flex items-center justify-center ".concat(N>=0?"text-white":"text-red-400"),children:p(N)}),(0,r.jsxs)("div",{className:"text-white/80 text-lg mt-auto font-semibold mb-2",children:["Max Drawdown: ",d(y.maxDD)]}),(0,r.jsxs)("div",{className:"text-white/80 text-lg font-semibold",children:["Income: ",d(y.income)]})]}),(0,r.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"rounded-2xl border border-white/10 bg-white/[0.02] backdrop-blur-sm p-6 flex flex-col items-center text-center",children:[(0,r.jsx)("div",{className:"text-white/70 text-lg font-medium mb-4",children:"First Principle-Optimized Outcome"}),(0,r.jsx)("div",{className:"text-5xl md:text-6xl font-semibold tabular-nums mb-8 flex-grow flex items-center justify-center ".concat(q>=0?"text-white":"text-red-400"),children:p(q)}),(0,r.jsxs)("div",{className:"text-white/80 text-lg mt-auto font-semibold mb-2",children:["Max Drawdown: ",d(w.maxDD)]}),(0,r.jsxs)("div",{className:"text-white/80 text-lg font-semibold",children:["Income: ",d(w.income)]})]}),(0,r.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"rounded-2xl border border-white/10 bg-white/[0.02] backdrop-blur-sm p-6 flex flex-col items-center text-center",children:[(0,r.jsx)("div",{className:"text-white/70 text-lg font-medium mb-4",children:"Opportunity Cost"}),(0,r.jsx)("div",{className:"text-5xl md:text-6xl font-semibold tabular-nums mb-8 flex-grow flex items-center justify-center text-amber-400",children:F?"Matched":"+".concat(Math.max(0,E).toFixed(1))}),(0,r.jsx)("div",{className:"text-white/80 text-lg mt-auto font-semibold",children:F?"Matched Optimal":"Performance Gap"})]})]}),(0,r.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"rounded-2xl border border-white/10 bg-white/[0.02] backdrop-blur-sm p-8 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Allocation Comparison"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-white/60 text-sm mb-4",children:"Your Allocation"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(u,{label:"Fixed Income",value:g.fi,color:"#3b82f6"}),(0,r.jsx)(u,{label:"Equities",value:g.eq,color:"#10b981"}),(0,r.jsx)(u,{label:"Structured",value:g.struct,color:"#f59e0b"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-white/60 text-sm mb-4",children:"Optimal Allocation"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(u,{label:"Fixed Income",value:v.fi,color:"#3b82f6"}),(0,r.jsx)(u,{label:"Equities",value:v.eq,color:"#10b981"}),(0,r.jsx)(u,{label:"Structured",value:v.struct,color:"#f59e0b"})]})]})]})]}),(0,r.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"rounded-2xl border border-white/10 bg-white/[0.02] backdrop-blur-sm p-8 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-6",children:f.headline}),(0,r.jsx)("ul",{className:"space-y-3 mb-6",children:f.bullets.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-white/40 mr-3 mt-1",children:"â€¢"}),(0,r.jsx)("span",{className:"text-white/80 leading-relaxed",children:e})]},t))}),f.optimalMechanism&&(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t border-white/10",children:[(0,r.jsx)("div",{className:"text-white/60 text-sm uppercase tracking-wider mb-2",children:"Optimal Mechanism"}),(0,r.jsx)("p",{className:"text-white/90 leading-relaxed",children:f.optimalMechanism})]})]}),(0,r.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex flex-col sm:flex-row gap-4",children:S?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.default,{href:"/portfolio-challenge/game",onClick:()=>h(S),className:"flex-1 rounded-xl bg-white text-black px-8 py-4 font-medium hover:bg-white/90 transition-colors text-center",children:["Continue to Level ",S]}),(0,r.jsx)(n.default,{href:"/portfolio-challenge",className:"rounded-xl border border-white/20 px-8 py-4 text-white/80 hover:bg-white/5 transition-colors text-center",children:"Restart Later"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.default,{href:"/portfolio-challenge/reveal",className:"flex-1 rounded-xl bg-white text-black px-8 py-4 font-medium hover:bg-white/90 transition-colors text-center",children:"See the Reveal"}),(0,r.jsx)(n.default,{href:"/portfolio-challenge",className:"rounded-xl border border-white/20 px-8 py-4 text-white/80 hover:bg-white/5 transition-colors text-center",children:"Restart"})]})})]})})}function u(e){let{label:t,value:i,color:s}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,r.jsx)("span",{className:"text-sm text-white/80",children:t}),(0,r.jsx)("span",{className:"text-sm tabular-nums text-white/60",children:d(i)})]}),(0,r.jsx)("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:(0,r.jsx)(c.E.div,{initial:{width:0},animate:{width:"".concat(100*i,"%")},transition:{duration:.5,ease:"easeOut"},style:{backgroundColor:s},className:"h-full"})})]})}function d(e){let t=100*e;return"".concat(t>=0?"+":"").concat(t.toFixed(1),"%")}function p(e){return"".concat(e>=0?"+":"").concat(e.toFixed(1))}function m(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("main",{className:"min-h-screen bg-black text-white grid place-items-center",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-white/60",children:"Loading results..."})})}),children:(0,r.jsx)(l,{})})}},59625:function(e,t,i){"use strict";i.d(t,{Ue:function(){return p}});let r=e=>{let t;let i=new Set,r=(e,r)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=r?r:"object"!=typeof s||null===s)?s:Object.assign({},t,s),i.forEach(i=>i(t,e))}},s=()=>t,n={setState:r,getState:s,getInitialState:()=>a,subscribe:e=>(i.add(e),()=>i.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},a=t=e(r,s,n);return n},s=e=>e?r(e):r;var n=i(2265),a=i(35195);let{useDebugValue:o}=n,{useSyncExternalStoreWithSelector:c}=a,l=!1,u=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?s(e):e,i=(e,i)=>(function(e,t=u,i){i&&!l&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),l=!0);let r=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,i);return o(r),r})(t,e,i);return Object.assign(i,t),i},p=e=>e?d(e):d}},function(e){e.O(0,[521,648,898,971,117,744],function(){return e(e.s=51719)}),_N_E=e.O()}]);